/* =============================================
   YOYAKU PLAYER V3 ULTRA-FIN - FINAL FIXED
   ============================================= */

/* CSS RESET */
.yoyaku-player-ultra-fin * {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

/* HIDE OLD PLAYERS */
.fwa-player,
.fwap-player-v1,
.fwap-player-v2,
.yoyaku-player-minimal,
#fwap-player {
  display: none !important;
}

/* PLAYER CONTAINER */
.yoyaku-player-ultra-fin {
  position: fixed !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  width: 100% !important;
  height: 48px !important;
  background: rgba(20, 20, 20, 0.95) !important;
  backdrop-filter: blur(10px) !important;
  -webkit-backdrop-filter: blur(10px) !important;
  border-top: 1px solid rgba(255, 255, 255, 0.1) !important;
  z-index: 9999 !important;
  display: flex !important;
  align-items: center !important;
  padding: 0 15px !important;
  gap: 10px !important;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
}

/* VINYL */
.yoyaku-player-ultra-fin .vinyl-wrapper {
  width: 38px !important;
  height: 38px !important;
  flex-shrink: 0 !important;
  position: relative !important;
  cursor: pointer !important;
}

.yoyaku-player-ultra-fin .vinyl-cover {
  width: 100% !important;
  height: 100% !important;
  border-radius: 50% !important;
  object-fit: cover !important;
  box-shadow: 0 2px 4px rgba(0,0,0,0.3) !important;
}

@keyframes vinyl-spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.yoyaku-player-ultra-fin .vinyl-wrapper.playing {
  animation: vinyl-spin 2s linear infinite !important;
}

/* PRODUCT INFO */
.yoyaku-player-ultra-fin .product-info {
  width: 140px !important;
  min-width: 140px !important;
  flex-shrink: 0 !important;
  display: flex !important;
  flex-direction: column !important;
  gap: 2px !important;
  overflow: hidden !important;
}

.yoyaku-player-ultra-fin .product-line-1,
.yoyaku-player-ultra-fin .product-line-2 {
  font-size: 11px !important;
  line-height: 1.2 !important;
  white-space: nowrap !important;
  overflow: hidden !important;
  text-overflow: ellipsis !important;
}

.yoyaku-player-ultra-fin .product-line-1 {
  color: #fff !important;
  font-weight: 500 !important;
}

.yoyaku-player-ultra-fin .product-line-2 {
  color: rgba(255, 255, 255, 0.6) !important;
  font-size: 10px !important;
}

/* CONTROLS WITH SVG ICONS */
.yoyaku-player-ultra-fin .controls-section {
  display: flex !important;
  align-items: center !important;
  gap: 8px !important;
  flex-shrink: 0 !important;
}

.yoyaku-player-ultra-fin .control-btn {
  width: 28px !important;
  height: 28px !important;
  background: transparent !important;
  border: none !important;
  cursor: pointer !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  opacity: 0.8 !important;
  transition: opacity 0.2s !important;
}

.yoyaku-player-ultra-fin .control-btn:hover {
  opacity: 1 !important;
}

/* Previous Button */
.yoyaku-player-ultra-fin .control-btn.prev::after {
  content: '' !important;
  width: 20px !important;
  height: 20px !important;
  display: block !important;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M6 6h2v12H6zm3.5 6l8.5 6V6z'/%3E%3C/svg%3E") !important;
  background-size: contain !important;
  background-repeat: no-repeat !important;
  background-position: center !important;
}

/* Play/Pause Button */
.yoyaku-player-ultra-fin .control-btn.play-pause::after {
  content: '' !important;
  width: 20px !important;
  height: 20px !important;
  display: block !important;
  background-size: contain !important;
  background-repeat: no-repeat !important;
  background-position: center !important;
}

.yoyaku-player-ultra-fin .control-btn.play-pause:not(.playing)::after {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M8 5v14l11-7z'/%3E%3C/svg%3E") !important;
}

.yoyaku-player-ultra-fin .control-btn.play-pause.playing::after {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M6 19h4V5H6v14zm8-14v14h4V5h-4z'/%3E%3C/svg%3E") !important;
}

/* Next Button */
.yoyaku-player-ultra-fin .control-btn.next::after {
  content: '' !important;
  width: 20px !important;
  height: 20px !important;
  display: block !important;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z'/%3E%3C/svg%3E") !important;
  background-size: contain !important;
  background-repeat: no-repeat !important;
  background-position: center !important;
}

/* Hide button text */
.yoyaku-player-ultra-fin .control-btn span,
.yoyaku-player-ultra-fin .btn-play,
.yoyaku-player-ultra-fin .btn-pause {
  display: none !important;
}

/* VOLUME CONTROL */
.yoyaku-player-ultra-fin .volume-control {
  position: relative !important;
  width: 24px !important;
  height: 24px !important;
  margin-left: 10px !important;
}

.yoyaku-player-ultra-fin .volume-icon {
  width: 24px !important;
  height: 24px !important;
  cursor: pointer !important;
  opacity: 0.8 !important;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z'/%3E%3C/svg%3E") !important;
  background-size: 18px 18px !important;
  background-position: center !important;
  background-repeat: no-repeat !important;
}

.yoyaku-player-ultra-fin .volume-icon:hover {
  opacity: 1 !important;
}

.yoyaku-player-ultra-fin .volume-popup {
  position: absolute !important;
  bottom: 100% !important;
  left: 50% !important;
  transform: translateX(-50%) !important;
  background: rgba(0,0,0,0.9) !important;
  padding: 10px !important;
  border-radius: 4px !important;
  margin-bottom: 5px !important;
  display: none !important;
}

.yoyaku-player-ultra-fin .volume-control:hover .volume-popup {
  display: block !important;
}

.yoyaku-player-ultra-fin .volume-slider {
  width: 100px !important;
  height: 4px !important;
  -webkit-appearance: none !important;
  background: #666 !important;
  outline: none !important;
  border-radius: 2px !important;
}

.yoyaku-player-ultra-fin .volume-slider::-webkit-slider-thumb {
  -webkit-appearance: none !important;
  width: 12px !important;
  height: 12px !important;
  background: #fff !important;
  border-radius: 50% !important;
  cursor: pointer !important;
}

/* PITCH CONTROL */
.yoyaku-player-ultra-fin .pitch-control {
  position: relative !important;
  width: 24px !important;
  height: 24px !important;
  margin-left: 5px !important;
}

.yoyaku-player-ultra-fin .pitch-icon {
  width: 24px !important;
  height: 24px !important;
  cursor: pointer !important;
  opacity: 0.8 !important;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z'/%3E%3C/svg%3E") !important;
  background-size: 18px 18px !important;
  background-position: center !important;
  background-repeat: no-repeat !important;
}

.yoyaku-player-ultra-fin .pitch-icon:hover {
  opacity: 1 !important;
}

.yoyaku-player-ultra-fin .pitch-popup {
  position: absolute !important;
  bottom: 100% !important;
  left: 50% !important;
  transform: translateX(-50%) !important;
  background: rgba(0,0,0,0.9) !important;
  padding: 10px !important;
  border-radius: 4px !important;
  margin-bottom: 5px !important;
  display: none !important;
}

.yoyaku-player-ultra-fin .pitch-control:hover .pitch-popup {
  display: block !important;
}

.yoyaku-player-ultra-fin .pitch-slider {
  width: 100px !important;
  height: 4px !important;
  -webkit-appearance: none !important;
  background: #666 !important;
  outline: none !important;
  border-radius: 2px !important;
}

.yoyaku-player-ultra-fin .pitch-slider::-webkit-slider-thumb {
  -webkit-appearance: none !important;
  width: 12px !important;
  height: 12px !important;
  background: #fff !important;
  border-radius: 50% !important;
  cursor: pointer !important;
}

/* WAVEFORM - TAKES ALL AVAILABLE SPACE */
.yoyaku-player-ultra-fin .waveform-container {
  flex-grow: 1 !important;
  flex-shrink: 1 !important;
  min-width: 0 !important;
  height: 36px !important;
  background: rgba(30, 30, 30, 0.8) !important;
  border-radius: 18px !important;
  overflow: hidden !important;
  margin: 0 10px !important;
  position: relative !important;
}

.yoyaku-player-ultra-fin #waveform {
  width: 100% !important;
  height: 100% !important;
}

/* PLAYLIST DROPDOWN */
.yoyaku-player-ultra-fin .playlist-container {
  position: relative !important;
  flex-shrink: 0 !important;
}

.yoyaku-player-ultra-fin .current-track {
  background: rgba(125, 185, 216, 0.2) !important;
  color: #fff !important;
  padding: 6px 12px !important;
  border-radius: 4px !important;
  font-size: 11px !important;
  cursor: pointer !important;
  white-space: nowrap !important;
  max-width: 150px !important;
  overflow: hidden !important;
  text-overflow: ellipsis !important;
}

.yoyaku-player-ultra-fin .playlist-dropdown {
  position: absolute !important;
  bottom: 100% !important;
  right: 0 !important;
  background: rgba(20, 20, 20, 0.95) !important;
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
  border-radius: 4px !important;
  margin-bottom: 5px !important;
  min-width: 200px !important;
  max-height: 200px !important;
  overflow-y: auto !important;
  display: none !important;
}

.yoyaku-player-ultra-fin .playlist-container.open .playlist-dropdown {
  display: block !important;
}

.yoyaku-player-ultra-fin .playlist-dropdown .track-item {
  padding: 8px 12px !important;
  color: rgba(255, 255, 255, 0.8) !important;
  font-size: 11px !important;
  cursor: pointer !important;
  transition: background 0.2s !important;
}

.yoyaku-player-ultra-fin .playlist-dropdown .track-item:hover {
  background: rgba(125, 185, 216, 0.2) !important;
}

.yoyaku-player-ultra-fin .playlist-dropdown .track-item.active {
  background: rgba(125, 185, 216, 0.3) !important;
  color: #fff !important;
}

/* CART BUTTON */
.yoyaku-player-ultra-fin .cart-btn {
  width: 34px !important;
  height: 34px !important;
  border-radius: 50% !important;
  background: rgba(125, 185, 216, 0.8) !important;
  border: 1px solid rgba(125, 185, 216, 0.4) !important;
  color: #fff !important;
  font-size: 14px !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  cursor: pointer !important;
  flex-shrink: 0 !important;
  transition: background 0.2s !important;
}

.yoyaku-player-ultra-fin .cart-btn:hover {
  background: rgba(125, 185, 216, 1) !important;
}

/* BODY PADDING */
body {
  padding-bottom: 48px !important;
}

/* RESPONSIVE MEDIUM 481-768px */
@media (min-width: 481px) and (max-width: 768px) {
  .yoyaku-player-ultra-fin {
    padding: 0 10px !important;
    gap: 6px !important;
  }
  
  .yoyaku-player-ultra-fin .vinyl-wrapper {
    width: 34px !important;
    height: 34px !important;
  }
  
  .yoyaku-player-ultra-fin .product-info {
    width: 110px !important;
    min-width: 110px !important;
  }
  
  .yoyaku-player-ultra-fin .control-btn {
    width: 24px !important;
    height: 24px !important;
  }
  
  .yoyaku-player-ultra-fin .control-btn::after,
  .yoyaku-player-ultra-fin .control-btn.prev::after,
  .yoyaku-player-ultra-fin .control-btn.play-pause::after,
  .yoyaku-player-ultra-fin .control-btn.next::after {
    width: 16px !important;
    height: 16px !important;
  }
  
  .yoyaku-player-ultra-fin .volume-control,
  .yoyaku-player-ultra-fin .pitch-control {
    display: none !important;
  }
  
  .yoyaku-player-ultra-fin .waveform-container {
    height: 32px !important;
  }
  
  .yoyaku-player-ultra-fin .cart-btn {
    width: 30px !important;
    height: 30px !important;
    font-size: 12px !important;
  }
}

/* RESPONSIVE SMALL ≤480px */
@media (max-width: 480px) {
  .yoyaku-player-ultra-fin {
    height: 90px !important;
    padding: 8px !important;
    display: grid !important;
    grid-template-columns: 38px 1fr 34px !important;
    grid-template-rows: 1fr 1fr !important;
    gap: 8px !important;
  }
  
  /* Row 1 */
  .yoyaku-player-ultra-fin .vinyl-wrapper {
    grid-row: 1 !important;
    grid-column: 1 !important;
  }
  
  .yoyaku-player-ultra-fin .product-info {
    grid-row: 1 !important;
    grid-column: 2 !important;
    width: auto !important;
  }
  
  .yoyaku-player-ultra-fin .cart-btn {
    grid-row: 1 !important;
    grid-column: 3 !important;
  }
  
  /* Row 2 */
  .yoyaku-player-ultra-fin .controls-section {
    grid-row: 2 !important;
    grid-column: 1 / 2 !important;
    justify-content: center !important;
    gap: 4px !important;
  }
  
  .yoyaku-player-ultra-fin .waveform-container {
    grid-row: 2 !important;
    grid-column: 2 !important;
    margin: 0 !important;
  }
  
  .yoyaku-player-ultra-fin .playlist-container {
    grid-row: 2 !important;
    grid-column: 3 !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
  }
  
  .yoyaku-player-ultra-fin .current-track {
    padding: 4px 8px !important;
    font-size: 10px !important;
    max-width: 34px !important;
  }
  
  .yoyaku-player-ultra-fin .control-btn {
    width: 22px !important;
    height: 22px !important;
  }
  
  .yoyaku-player-ultra-fin .control-btn::after,
  .yoyaku-player-ultra-fin .control-btn.prev::after,
  .yoyaku-player-ultra-fin .control-btn.play-pause::after,
  .yoyaku-player-ultra-fin .control-btn.next::after {
    width: 14px !important;
    height: 14px !important;
  }
  
  .yoyaku-player-ultra-fin .volume-control,
  .yoyaku-player-ultra-fin .pitch-control {
    display: none !important;
  }
  
  body {
    padding-bottom: 90px !important;
  }
}